(this["webpackJsonpchemical-cms"]=this["webpackJsonpchemical-cms"]||[]).push([[0],{47:function(e,t,a){e.exports=a(83)},52:function(e,t,a){},53:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},54:function(e,t,a){},57:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(43),l=a.n(c),r=(a(52),a(53),a(54),a(15)),s=a(4),i=a.n(s),u=a(9),m=a(1),d=a(13),f=a.n(d),b=function(e){var t=Object(n.useState)(e),a=Object(m.a)(t,2),c=a[0];a[1];console.log(e),console.log(c),Object(n.useEffect)((function(){console.log(c)}),[c]);var l={type:"line",data:{labels:[],datasets:[{label:"Jobs completes",data:e.dates,borderWidth:5,pointStyle:"triangle",pointRadius:"10",pointBackgroundColor:"#ec6b56",fill:!1}],pointStyle:"triangle"},options:{scales:{xAxes:[{type:"time",time:{unit:"day",stepSize:1,displayFormat:"DD/MM/YY",tooltipFormat:"DD/MM/YY"},ticks:{major:{enabled:!0,fontStyle:"bold",fontSize:14}}}],yAxes:[{ticks:{beginAtZero:!0}}]}}};console.log("start create chart");var r=Object(n.useRef)(null),s=Object(n.useState)(null),i=Object(m.a)(s,2),u=i[0],d=i[1];console.log(u);var b,v;return b=0,v=e.dates,u&&(u.config.data.datasets[b].data=v,u.update()),Object(n.useEffect)((function(){if(r&&r.current){var e=new f.a(r.current,l);d(e)}}),[r]),o.a.createElement("div",null,o.a.createElement("canvas",{ref:r}))},v=(a(57),a(10)),h=a.n(v);function p(){var e=Object(n.useState)({alerts:[]}),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),s=Object(m.a)(l,2),d=s[0],f=s[1],v=Object(n.useState)(),p=Object(m.a)(v,2),E=p[0],g=p[1];Object(n.useEffect)((function(){var e=!0;function t(){return(t=Object(u.a)(i.a.mark((function t(){var a,n,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h()("http://localhost/allstock");case 2:a=t.sent,n=0,o=0,a.data.forEach((function(t){"A"===t.chemical&&t.warehouse_id<=5&&(n+=t.amount),"A"===t.chemical&&t.warehouse_id>5&&(o+=t.amount),e&&(o>=15&&c((function(e){return[].concat(Object(r.a)(e),[{reason:"More than 15 A",site:"2"}])})),n>=15&&c((function(e){return[].concat(Object(r.a)(e),[{reason:"More than 15 A",site:"1"}])})))})),console.log("fetch stock for alert level");case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){var t=Object(u.a)(i.a.mark((function t(){var a,n,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(e){var t={},a=[];for(var n in e.forEach((function(e){console.log(e),t[e]||(t[e]=0),t[e]+=1})),console.log(),t)a.push({t:new Date(n),y:t[n]});return a},console.log("fetch jobs"),t.next=4,h()("http://localhost/job");case 4:a=t.sent,console.log(a.data),n=a.data.map((function(e,t){var a=new Date(e.date);return a=a.getFullYear()+"-"+(parseInt(a.getMonth())+1)+"-"+a.getDate()})),n=o(n),console.log(n),e&&(f({dates:n}),g({dates:n}));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){t.apply(this,arguments)}(),function(){return e=!1}}),[]);var O=Object(n.useState)([{label:"Total",value:"total"},{label:"This week",value:"week"},{label:"This month",value:"month"}]),j=Object(m.a)(O,2),y=j[0],C=(j[1],a.alerts.map((function(e,t){return o.a.createElement("div",{className:"notification",key:t},o.a.createElement("p",{className:"notify"}," "),e.reason," at site #",e.site)}))),k=function(e){if(console.log(e),"month"===e){console.log(d);var t=E.dates.filter((function(e){console.log(e);var t=new Date(e.t).getMonth(),a=(new Date).getMonth();if(console.log(a,t),t===a)return console.log("matches"),e}));console.log(t),f({dates:t})}else if("week"===e){var a=function(){for(var e=new Date,t=[],a=1;a<=7;a++){var n=e.getDate()-e.getDay()+a,o=new Date(e.setDate(n)).toISOString().slice(0,10);t.push(o)}return t}(),n=E.dates.filter((function(e){if(a.includes(new Date(e.t).toISOString().slice(0,10)))return e}));f({dates:n})}else f(E)};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement("h1",null," Completed Jobs"),o.a.createElement("div",{className:"container-start-page"},o.a.createElement("div",{className:"alerts box"},"active alerts",C),o.a.createElement("div",{className:"jobs box"},o.a.createElement("select",{value:y.value,onChange:function(e){return k(e.currentTarget.value)}},y.map((function(e){var t=e.label,a=e.value;return o.a.createElement("option",{key:a,value:a},t)}))),d?o.a.createElement(b,d):null))))}function E(){var e=(new Date).toLocaleString(),t=Object(n.useState)({name:"Admin"}),a=Object(m.a)(t,2),c=a[0];a[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"main-header"},o.a.createElement("h3",null," Hello ",c.name),o.a.createElement("p",{className:"currentTime"},e)))}a(74);var g=a(18),O=a(2),j=(a(75),function(e){var t=Object(n.useState)(e),a=Object(m.a)(t,2),c=a[0];a[1];console.log(e),Object(n.useEffect)((function(){console.log(c)}),[c]);var l=Object.values(e).pop();console.log(l);var r=Object.keys(e),s=Object.values(e);console.log(r),r.pop(),r.pop(),s.pop(),s.pop(),console.log(r,s);var i={type:"pie",data:{labels:r,datasets:[{label:"Total",data:s,backgroundColor:["#ec6b56","#FFc154","#47b39c"],borderColor:["#fff","#fff","#fff"]}]},options:{legend:{display:!0,position:"left",labels:{fontColor:"rgb(255, 99, 132)"}},title:{display:!0,text:"Total ".concat(l," ku")},layout:{padding:{left:50,right:0,top:0,bottom:0}}}},u=Object(n.useRef)(null),d=Object(n.useState)(null),b=Object(m.a)(d,2),v=b[0],h=b[1];return function(e,t,a){v&&(v.config.data.datasets[e].data=t,v.config.options.title.text="Total ".concat(a," ku"),v.update())}(0,s,l),console.log(v),Object(n.useEffect)((function(){if(u&&u.current){var e=new f.a(u.current,i);h(e)}}),[u]),o.a.createElement("div",null,o.a.createElement("canvas",{ref:u}))}),y=function(e){var t=Object(n.useState)(e),a=Object(m.a)(t,2),c=a[0];a[1];console.log(e),Object(n.useEffect)((function(){console.log(c)}),[c]);var l=Object.values(e).pop();console.log(l);var r=Object.keys(e),s=Object.values(e);console.log(r),r.pop(),r.pop(),s.pop(),s.pop(),console.log(r,s);var i={type:"pie",data:{labels:r,datasets:[{label:"Total",data:s,backgroundColor:["#ec6b56","#FFc154","#47b39c"],borderColor:["#fff","#fff","#fff"]}]},options:{legend:{display:!0,position:"left",labels:{fontColor:"rgb(255, 99, 132)"}},title:{display:!0,text:"Total ".concat(l," ku")},layout:{padding:{left:50,right:0,top:0,bottom:0}}}},u=Object(n.useRef)(null),d=Object(n.useState)(null),b=Object(m.a)(d,2),v=b[0],h=b[1];return function(e,t,a){v&&(v.config.data.datasets[e].data=t,v.config.options.title.text="Total ".concat(a," ku"),v.update())}(0,s,l),console.log(v),Object(n.useEffect)((function(){if(u&&u.current){var e=new f.a(u.current,i);h(e)}}),[u]),o.a.createElement("div",null,o.a.createElement("canvas",{ref:u}))};function C(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=(t[0],t[1],Object(n.useState)([{label:"total",value:"total"},{label:"today",value:"today"},{label:"week",value:"week"},{label:"month",value:"month"}])),c=Object(m.a)(a,2),l=c[0],r=(c[1],Object(n.useState)([{label:"total",value:"total"},{label:"today",value:"today"},{label:"week",value:"week"},{label:"month",value:"month"}])),s=Object(m.a)(r,2),d=s[0],f=(s[1],Object(n.useState)({})),b=Object(m.a)(f,2),v=b[0],p=b[1],E=Object(n.useState)({}),g=Object(m.a)(E,2),O=g[0],C=g[1],k=Object(n.useState)([]),w=Object(m.a)(k,2),D=w[0],S=w[1],F=Object(n.useState)([]),A=Object(m.a)(F,2),I=A[0],B=A[1],N=function(){for(var e=new Date,t=[],a=1;a<=7;a++){var n=e.getDate()-e.getDay()+a,o=new Date(e.setDate(n)).toISOString().slice(0,10);t.push(o)}return t};return Object(n.useEffect)((function(){var e=!0;return function(){var t=Object(u.a)(i.a.mark((function t(){var a,n,o,c,l,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h()("http://localhost/jobsWithJobItems");case 2:a=t.sent,n={today:{A:0,B:0,C:0,total:0},total:{A:0,B:0,C:0,total:0},week:{A:0,B:0,C:0,total:0},month:{A:0,B:0,C:0,total:0}},o={today:{A:0,B:0,C:0,total:0},total:{A:0,B:0,C:0,total:0},week:{A:0,B:0,C:0,total:0},month:{A:0,B:0,C:0,total:0}},c=(new Date).getDay(),l=(new Date).getMonth(),r=N(new Date),a.data.forEach((function(e){e.jobItem.forEach((function(t){var a=new Date(e.date).toISOString().slice(0,10);"I"===e.type&&(n.total[t.chemical]=parseInt(n.total[t.chemical])+parseInt(t.amount),n.total.total=parseInt(n.total.total)+parseInt(t.amount),l===new Date(e.date).getMonth()&&(n.month[t.chemical]=parseInt(n.month[t.chemical])+parseInt(t.amount),n.month.total=parseInt(n.month.total)+parseInt(t.amount)),c===new Date(e.date).getDay()&&(n.today[t.chemical]=parseInt(n.today[t.chemical])+parseInt(t.amount),n.today.total=parseInt(n.today.total)+parseInt(t.amount)),r.includes(a)&&(n.week[t.chemical]=parseInt(n.week[t.chemical])+parseInt(t.amount),n.week.total=parseInt(n.week.total)+parseInt(t.amount))),"O"===e.type&&(o.total[t.chemical]=parseInt(o.total[t.chemical])+parseInt(t.amount),o.total.total=parseInt(o.total.total)+parseInt(t.amount),l===new Date(e.date).getMonth()&&(o.month[t.chemical]=parseInt(o.month[t.chemical])+parseInt(t.amount),o.month.total=parseInt(o.month.total)+parseInt(t.amount)),c===new Date(e.date).getDay()&&(o.today[t.chemical]=parseInt(o.today[t.chemical])+parseInt(t.amount),o.today.total=parseInt(o.today.total)+parseInt(t.amount)),r.includes(a)&&(o.week[t.chemical]=parseInt(o.week[t.chemical])+parseInt(t.amount),o.week.total=parseInt(o.week.total)+parseInt(t.amount)))}))})),e&&(B([{A:n.today.A,B:n.today.B,C:n.today.C,desc:"today",total:n.today.total},{A:n.total.A,B:n.total.B,C:n.total.C,desc:"total",total:n.total.total},{A:n.week.A,B:n.week.B,C:n.week.C,desc:"week",total:n.week.total},{A:n.month.A,B:n.month.B,C:n.month.C,desc:"month",total:n.month.total}]),S([{A:o.today.A,B:o.today.B,C:o.today.C,desc:"today",total:o.today.total},{A:o.total.A,B:o.total.B,C:o.total.C,desc:"total",total:o.total.total},{A:o.week.A,B:o.week.B,C:o.week.C,desc:"week",total:o.week.total},{A:o.month.A,B:o.month.B,C:o.month.C,desc:"month",total:o.month.total}]),p({A:n.total.A,B:n.total.B,C:n.total.C,desc:"total",total:n.total.total}),C({A:o.total.A,B:o.total.B,C:o.total.C,desc:"total",total:o.total.total}));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){return e=!1}}),[]),console.log(I),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement("h1",null," All chemicals on sites"),o.a.createElement("div",{className:"chemicals-container"},o.a.createElement("div",{className:"deliver-container"},o.a.createElement("h2",null,"Delivered"),o.a.createElement("select",{value:l.value,onChange:function(e){return t=e.currentTarget.value,console.log(t),void I.forEach((function(e){t===e.desc&&(console.log({deliveryForChart:v}),console.log(e),p({A:e.A,B:e.B,C:e.C,desc:e.desc,total:e.total}),console.log({deliveryForChart:v}))}));var t}},l.map((function(e){var t=e.label,a=e.value;return o.a.createElement("option",{key:a,value:a},t)}))),0===Object.keys(v).length&&v.constructor===Object?o.a.createElement("p",null,"Loading"):o.a.createElement(j,v)),o.a.createElement("div",{className:"dispatch-container"},o.a.createElement("h2",null,"Dispatched"),o.a.createElement("select",{value:d.value,onChange:function(e){return t=e.currentTarget.value,void D.forEach((function(e){t===e.desc&&(C({A:e.A,B:e.B,C:e.C,desc:e.desc,total:e.total}),console.log({dispatchForChart:O}))}));var t}},d.map((function(e){var t=e.label,a=e.value;return o.a.createElement("option",{key:a,value:a},t)}))),0===Object.keys(O).length&&O.constructor===Object?o.a.createElement("p",null,"Loading"):o.a.createElement(y,O)))))}var k=a(17),w=a(44),D=(a(76),function(e){var t=Object(n.useState)(e),a=Object(m.a)(t,2);a[0],a[1];console.log("props",Object.keys(e.chemicalInventory));var c=e.id,l=Object.keys(e.chemicalInventory),r=Object.values(e.chemicalInventory);console.log(l,r);var s={type:"bar",data:{labels:l,datasets:[{label:"Warehouse# ".concat(c),data:r,backgroundColor:["#47b39c","#FFc154"],borderWidth:1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}},i=Object(n.useRef)(null),u=Object(n.useState)(null),d=Object(m.a)(u,2),b=(d[0],d[1]);Object(n.useEffect)((function(){if(i&&i.current){var e=new f.a(i.current,s);b(e)}}),[i]);return o.a.createElement("div",null,o.a.createElement("canvas",{ref:i}))});function S(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),r=Object(m.a)(l,2),s=r[0],d=r[1];Object(n.useEffect)((function(){var e=!0;return function(){var t=Object(u.a)(i.a.mark((function t(){var a,n,o,l,r,s,u,m,b;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h()("http://localhost/warehouses");case 2:a=t.sent,n=a.data,o=!0,l=!1,t.prev=6,s=Object(w.a)(n);case 8:return t.next=10,s.next();case 10:return u=t.sent,o=u.done,t.next=14,u.value;case 14:if(m=t.sent,o){t.next=24;break}return b=m,console.log(n),t.next=20,f(b.id);case 20:b.chemicalInventory=t.sent;case 21:o=!0,t.next=8;break;case 24:t.next=30;break;case 26:t.prev=26,t.t0=t.catch(6),l=!0,r=t.t0;case 30:if(t.prev=30,t.prev=31,o||null==s.return){t.next=35;break}return t.next=35,s.return();case 35:if(t.prev=35,!l){t.next=38;break}throw r;case 38:return t.finish(35);case 39:return t.finish(30);case 40:e&&(c(n),d(!1));case 41:case"end":return t.stop()}}),t,null,[[6,26,30,40],[31,,35,39]])})));return function(){return t.apply(this,arguments)}}()(),function(){return e=!1}}),[]),console.log(s);var f=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h()("http://localhost/currentstock/".concat(t));case 2:return a=e.sent,e.next=5,a.data;case 5:return n=e.sent,o={},n.map((function(e){var t={};return t[e.chemical]=e.amount,o=Object(k.a)(Object(k.a)({},t),o),t})),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s?o.a.createElement("div",null,"Loading.."):o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null," Warehouse current stock"),o.a.createElement("h2",null,"Site 1"),o.a.createElement("div",{className:"warehouse-container"},o.a.createElement("div",{className:"canvas-container"},o.a.createElement(D,a[0])),o.a.createElement("div",{className:"canvas-container"},o.a.createElement(D,a[1])),o.a.createElement("div",{className:"canvas-container"},o.a.createElement(D,a[2])),o.a.createElement("div",{className:"canvas-container"},o.a.createElement(D,a[3])),o.a.createElement("div",{className:"canvas-container"},o.a.createElement(D,a[4]))),o.a.createElement("h2",null,"Site 2"),o.a.createElement("div",{className:"warehouse-container"},o.a.createElement("div",{className:"canvas-container"},o.a.createElement(D,a[5])),o.a.createElement("div",{className:"canvas-container"},o.a.createElement(D,a[6])),o.a.createElement("div",{className:"canvas-container"},o.a.createElement(D,a[7])),o.a.createElement("div",{className:"canvas-container"},o.a.createElement(D,a[8])),o.a.createElement("div",{className:"canvas-container"},o.a.createElement(D,a[9]))))}var F=a(27),A=a(28);function I(){var e=Object(F.a)(["\n  ","\n"]);return I=function(){return e},e}function B(){var e=Object(F.a)(["\n  border: none;\n  outline: none;\n  cursor: pointer;\n  width: 45%;\n  margin:0 1%;\n  position: relative;\n  font-size: 1em;\n  border: ",";\n  border-bottom: ",";\n  background-color: ",";\n  height: ",";\n  transition: background-color 0.5s ease-in-out;\n  :hover {\n    background-color: white;\n  }\n"]);return B=function(){return e},e}function N(){var e=Object(F.a)(["\n  overflow: hidden;\n  background: #fff;\n  width:100%;\n  display:block;\n  margin:0 4%;\n  font-family: Open Sans;\n  height: 3em;\n"]);return N=function(){return e},e}var x=A.a.div(N()),T=A.a.button(B(),(function(e){return e.active?"1px solid #ccc":""}),(function(e){return e.active?"none":""}),(function(e){return e.active?"white":"lightgray"}),(function(e){return e.active?"3em":"2.6em; top:.4em"})),H=A.a.div(I(),(function(e){return e.active?"":"display:none"})),L=(a(78),a(3)),M=a(12),W=o.a.createContext({focusedDate:null,isDateFocused:function(){return!1},isDateSelected:function(){return!1},isDateHovered:function(){return!1},isDateBlocked:function(){return!1},isFirstOrLastSelectedDate:function(){return!1},onDateFocus:function(){},onDateHover:function(){},onDateSelect:function(){}});var R=function(e){var t=e.dayLabel,a=e.date,o=Object(n.useRef)(null),c=Object(n.useContext)(W),l=c.focusedDate,r=c.isDateFocused,s=c.isDateSelected,i=c.isDateHovered,u=c.isDateBlocked,m=c.isFirstOrLastSelectedDate,d=c.onDateSelect,f=c.onDateFocus,b=c.onDateHover,v=Object(M.c)({date:a,focusedDate:l,isDateFocused:r,isDateSelected:s,isDateHovered:i,isDateBlocked:u,isFirstOrLastSelectedDate:m,onDateFocus:f,onDateSelect:d,onDateHover:b,dayRef:o}),h=v.isSelected,p=v.isSelectedStartOrEnd,E=v.isWithinHoverRange,g=v.disabledDate,O=v.onClick,j=v.onKeyDown,y=v.onMouseEnter,C=v.tabIndex;if(!t)return Object(L.a)("div",null);var k=function(e,t,a,n){return function(o){var c=o.selectedFirstOrLastColor,l=o.normalColor,r=o.selectedColor,s=o.rangeHoverColor,i=o.disabledColor;return t?c:e?r:a?s:n?i:l}}(h,p,E,g);return Object(L.a)("button",{onClick:O,onKeyDown:j,onMouseEnter:y,tabIndex:C,type:"button",ref:o,css:{padding:"8px",margin:"1%",fontSize:"80%",border:0,color:k({selectedFirstOrLastColor:"#FFFFFF",normalColor:"#001217",selectedColor:"#FFFFFF",rangeHoverColor:"#FFFFFF",disabledColor:"#808285"}),background:k({selectedFirstOrLastColor:"#00aeef",normalColor:"#FFFFFF",selectedColor:"#71c9ed",rangeHoverColor:"#71c9ed",disabledColor:"#FFFFFF"})}},t)};var z=function(e){var t=e.year,a=e.month,n=e.firstDayOfWeek,o=Object(M.d)({year:t,month:a,firstDayOfWeek:n}),c=o.days,l=o.weekdayLabels,r=o.monthLabel;return Object(L.a)("div",null,Object(L.a)("div",{css:{textAlign:"center",margin:"0 0 16px"}},Object(L.a)("strong",null,r)),Object(L.a)("div",{css:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",justifyContent:"center",marginBottom:"10px",fontSize:"15px",color:"#1B998B"}},l.map((function(e){return Object(L.a)("div",{css:{textAlign:"center"},key:e},e)}))),Object(L.a)("div",{css:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",justifyContent:"center"}},c.map((function(e,t){return"object"===typeof e?Object(L.a)(R,{date:e.date,key:e.date.toString(),dayLabel:e.dayLabel}):Object(L.a)("div",{key:t})}))))};function J(e){var t=e.children,a=e.onClick;return Object(L.a)("button",{type:"button",onClick:a,css:{outline:"none",margin:"0 1rem 1rem",padding:"1rem",border:"none",width:"5rem",backgroundColor:"#333745",fontSize:"10px",color:"white"}},t)}var Y=Object(n.forwardRef)((function(e,t){var a=Object(n.useState)({startDate:null,endDate:null,focusedInput:M.a}),o=Object(m.a)(a,2),c=o[0],l=o[1];console.log({props:e});var r=function(){l({startDate:null,endDate:null,focusedInput:M.a})};Object(n.useImperativeHandle)(t,(function(){return{cleanValue:r}}));var s=Object(M.b)({startDate:c.startDate,endDate:c.endDate,focusedInput:c.focusedInput,onDatesChange:function(t){t.focusedInput?(l(t),console.log(t)):l(Object(k.a)(Object(k.a)({},t),{},{focusedInput:M.a}));e.onChange(t),console.log(t)}}),i=s.firstDayOfWeek,u=s.activeMonths,d=s.isDateSelected,f=s.isDateHovered,b=s.isFirstOrLastSelectedDate,v=s.isDateBlocked,h=s.isDateFocused,p=s.focusedDate,E=s.onDateHover,g=s.onDateSelect,O=s.onDateFocus,j=s.goToPreviousMonths,y=s.goToNextMonths;return Object(L.a)(W.Provider,{value:{focusedDate:p,isDateFocused:h,isDateSelected:d,isDateHovered:f,isDateBlocked:v,isFirstOrLastSelectedDate:b,onDateSelect:g,onDateFocus:O,onDateHover:E}},Object(L.a)(J,{onClick:j},"Previous"),Object(L.a)(J,{onClick:y},"Next"),Object(L.a)("div",{css:{display:"grid",margin:"0",gridTemplateColumns:"repeat(".concat(u.length,", 1fr)"),gridGap:"0 64px"}},u.map((function(e){return Object(L.a)(z,{key:"".concat(e.year,"-").concat(e.month),year:e.year,month:e.month,firstDayOfWeek:i})}))))})),_=function(e){var t=e.title,a=e.children,n=o.a.useState(!1),c=Object(m.a)(n,2),l=c[0],r=c[1];return o.a.createElement("div",{className:"accordion-wrapper"},o.a.createElement("div",{className:"accordion-title ".concat(l?"open":""),onClick:function(){return r(!l)}},t),o.a.createElement("div",{className:"accordion-item ".concat(l?"":"collapsed")},o.a.createElement("div",{className:"accordion-content"},a)))},P=a(14);function K(){var e=Object(n.useState)(0),t=Object(m.a)(e,2),a=t[0],c=t[1],l=function(e){var t=parseInt(e.target.id,0);t!==a&&c(t)},s=Object(n.useRef)(null),d=Object(n.useState)({A:0,B:0,C:0}),f=Object(m.a)(d,2),b=f[0],v=f[1],p=Object(n.useState)({A:0,B:0,C:0}),E=Object(m.a)(p,2),g=E[0],O=E[1],j=Object(n.useState)(),y=Object(m.a)(j,2),C=y[0],k=y[1],w=Object(n.useState)(),D=Object(m.a)(w,2),S=D[0],F=D[1],A=Object(n.useState)(),I=Object(m.a)(A,2),B=I[0],N=I[1],L=Object(n.useState)(),M=Object(m.a)(L,2),W=M[0],R=M[1],z=Object(n.useState)(),J=Object(m.a)(z,2),K=J[0],V=J[1],Z=Object(n.useState)(),G=Object(m.a)(Z,2),U=G[0],$=G[1],q=function(e){var t=e.map((function(e,t){return o.a.createElement("div",{className:"table-rows",key:t},o.a.createElement("p",{className:"tabel-item"}," ",e.chemical),o.a.createElement("p",{className:"tabel-item"}," ",e.action),o.a.createElement("p",{className:"tabel-item"}," ",e.date),o.a.createElement("p",{className:"tabel-item"}," ",e.warehouse),o.a.createElement("p",{className:"tabel-item"}," ",e.ticket))}));return t},Q=function(e){return console.log(e),Object.keys(e[0]).map((function(e,t){return o.a.createElement("p",{key:t,className:"tabel-header"},e.toUpperCase())}))},X=function(e){console.log("sort by warehouse");var t=Object(r.a)(e).sort((function(e,t){return e.warehouse-t.warehouse}));e===W?R(t):V(t)},ee=function(e){console.log("sort by date");var t=Object(r.a)(e).sort((function(e,t){var a=new Date(e.date),n=new Date(t.date);return console.log(a,n),a-n}));console.log(t),e===W?R(t):V(t)},te=function(e,t){console.log("sort by chemical",e,t);var a=Object(r.a)(t).filter((function(t){return e===t.chemical}));t===S?(console.log(a),R(a)):V(a)},ae=function(e,t){console.log("sort by job type");var a=Object(r.a)(t).filter((function(t){return e===t.action}));console.log(a),t===S?R(a):V(a)};function ne(e){console.log(e),N(e)}var oe=function(){N(null),s.current.cleanValue()};return Object(n.useEffect)((function(){var e,t=[],a=[],n=0,o=0,c=0,l=0,r=0,s=0,m=function(){var m=Object(u.a)(i.a.mark((function u(){var m;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,h()("http://localhost/jobsWithJobItems");case 2:m=i.sent,console.log(m.data),m.data.forEach((function(i){e="I"===i.type?"delivered":"dispatched";var u=new Date(i.date).toISOString().slice(0,10);i.jobItem.forEach((function(m){console.log(m),2===i.site_id?(a.push({chemical:m.chemical,action:e,date:u,warehouse:m.warehouse_id,ticket:i.id}),"A"===m.chemical&&(l+=m.amount),"B"===m.chemical&&(r+=m.amount),"C"===m.chemical&&(s+=m.amount)):(t.push({chemical:m.chemical,action:e,date:u,warehouse:m.warehouse_id,ticket:i.id}),"A"===m.chemical&&(n+=m.amount),"B"===m.chemical&&(o+=m.amount),"C"===m.chemical&&(c+=m.amount))}))})),F(t),k(a),R(t),V(a),O({A:n,B:o,C:c}),v({A:l,B:r,C:s});case 6:case"end":return i.stop()}}),u)})));return function(){return m.apply(this,arguments)}}();if(B||(console.log("fetch"),m()),console.log(B),B&&B.endDate&&S&&C){console.log(B);var d=W.filter((function(e){return!!P(e.date).isBetween(P(B.startDate),P(B.endDate),null,"[]")})),f=K.filter((function(e){return!!P(e.date).isBetween(P(B.startDate),P(B.endDate),null,"[]")}));d.length?($(""),R(d)):$("No jobs on those days"),f.length?($(""),V(f)):$("No jobs on those days")}}),[B]),W&&K?(console.log(S,C),o.a.createElement("div",null,o.a.createElement("div",{className:U?" errorAnim":null},U),o.a.createElement(x,null,o.a.createElement(T,{onClick:l,active:0===a,id:0},"Site 1"),o.a.createElement(T,{onClick:l,active:1===a,id:1},"Site 2")),o.a.createElement(o.a.Fragment,null,o.a.createElement(H,{active:0===a},o.a.createElement("h1",null,"Site 1"),o.a.createElement("div",{className:"total-container"},o.a.createElement("div",{className:"total"},o.a.createElement("h2",null," Total Inventory:"),o.a.createElement("h3",null,"A: ",g.A),o.a.createElement("h3",null," B: ",g.B),o.a.createElement("h3",null," C: ",g.C," ")),o.a.createElement("div",{className:"buttonWrapper"},o.a.createElement("button",{onClick:oe},"Clear all filters"),o.a.createElement("button",{onClick:function(){return X(W)}},"Sort by warehouse"),o.a.createElement("button",{onClick:function(){return ee(W)}},"Sort by date"),o.a.createElement("button",{onClick:function(){return te("A",S)}},"Show all A chemicals"),o.a.createElement("button",{onClick:function(){return te("B",S)}},"Show all B chemicals"),o.a.createElement("button",{onClick:function(){return te("C",S)}},"Show all C chemicals"),o.a.createElement("button",{onClick:function(){return ae("delivered",S)}},"Show all delivered"),o.a.createElement("button",{onClick:function(){return ae("dispatched",S)}},"Show all dispatched")),o.a.createElement("div",null,o.a.createElement(_,{title:"Search by date"},o.a.createElement(Y,{value:B,onChange:ne,ref:s}))),o.a.createElement("div",{className:"tickets"},o.a.createElement("div",{className:"tableHeaders"},Q(W)),q(W)))),o.a.createElement(H,{active:1===a},o.a.createElement("h1",null,"Site 2"),o.a.createElement("div",{className:"total-container"},o.a.createElement("div",{className:"total"},o.a.createElement("h2",null," Total amount:"),o.a.createElement("h3",null,"A: ",b.A),o.a.createElement("h3",null," B: ",b.B),o.a.createElement("h3",null," C: ",b.C," ")),o.a.createElement("div",{className:"buttonWrapper"},o.a.createElement("button",{onClick:oe},"Clear all filters"),o.a.createElement("button",{onClick:function(){return X(K)}},"Sort by warehouse"),o.a.createElement("button",{onClick:function(){return ee(K)}},"Sort by date"),o.a.createElement("button",{onClick:function(){return te("A",C)}},"Show all A"),o.a.createElement("button",{onClick:function(){return te("B",C)}},"Show all B"),o.a.createElement("button",{onClick:function(){return te("C",C)}},"Show all C"),o.a.createElement("button",{onClick:function(){return ae("delivered",C)}},"Show all delivered"),o.a.createElement("button",{onClick:function(){return ae("dispatched",C)}},"Show all dispatched")),o.a.createElement("div",null,o.a.createElement(_,{title:"Search by date"},o.a.createElement(Y,{value:B,onChange:ne,ref:s}))),o.a.createElement("div",null,o.a.createElement("div",{className:"tableHeaders"},Q(K)),q(K))))))):o.a.createElement("div",null,"Loading...")}function V(){return o.a.createElement(g.a,null,o.a.createElement("div",null,o.a.createElement("nav",{className:"aside"},o.a.createElement("ul",null,o.a.createElement(g.b,{to:"/",exact:!0,activeClassName:"active"},"Start page"),o.a.createElement(g.b,{to:"/chemicals",activeClassName:"active"},"Chemicals"),o.a.createElement(g.b,{to:"/warehouses",activeClassName:"active"},"Warehouses"),o.a.createElement(g.b,{to:"/search",activeClassName:"active"},"Search"))),o.a.createElement(O.c,null,o.a.createElement(O.a,{path:"/chemicals"},o.a.createElement(C,null)),o.a.createElement(O.a,{path:"/warehouses"},o.a.createElement(S,null)),o.a.createElement(O.a,{path:"/search"},o.a.createElement(K,null)),o.a.createElement(O.a,{path:"/"},o.a.createElement(p,null)))))}var Z=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(E,null),o.a.createElement(V,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.7f269409.chunk.js.map